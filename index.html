<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beach Kitten Cleanup</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <!-- Menú overlay -->
    <div id="menu" class="menu-overlay">
      <h1>Beach Kitten Cleanup</h1>
      <button id="startBtn">Iniciar juego</button>
      <div style="margin-top:8px;">
        <button id="chooseCharacterBtn" style="padding:10px 14px; font-size:16px;">Seleccionar personaje</button>
      </div>
      <button id="levelsBtn">Niveles</button>
      <div style="margin-top:8px;">
        <button id="settingsBtn" style="padding:10px 14px; font-size:16px;">Configuraciones</button>
      </div>
      <button id="exitBtn">Salir</button>

      <div id="levelsPanel" class="hidden">
        <label>Selecciona nivel:
          <select id="levelSelect">
            <option value="1">Nivel 1</option>
            <option value="2">Nivel 2</option>
            <option value="3">Nivel 3</option>
          </select>
        </label>
        <button id="startWithLevelBtn">Iniciar</button>
        <button id="backBtn">Volver</button>
      </div>
      
      
    </div>

    </div>

    <!-- Overlay de pausa (mostrado solo durante la partida al pulsar ESC) -->
    <div id="pauseOverlay" class="menu-overlay hidden">
      <div id="pausePanel">
        <p style="margin:0 0 8px 0; font-size:18px;">Juego en pausa</p>
        <button id="resumeBtn">Continuar</button>
        <button id="returnMenuBtn">Volver al menú principal</button>
        <button id="exitFromPauseBtn">Salir</button>
        <div style="margin-top:12px;">
          <button id="settingsBtnPause" style="padding:8px 12px; font-size:14px;">Configuraciones</button>
        </div>
      </div>
    </div>
    
    <!-- Overlay de Selección de Personaje -->
    <div id="characterOverlay" class="menu-overlay hidden">
      <div id="characterPanel" style="text-align:center; padding:18px; background:white; border-radius:12px; min-width:360px;">
        <h2 style="margin:0 0 12px 0;">Seleccionar personaje</h2>
        <div id="charGrid" style="display:grid; grid-template-columns:repeat(3,1fr); gap:12px;">
          <div class="char-card" data-src="assets/Gatito.png" tabindex="0">
            <img src="assets/Gatito.png" alt="Gatito" style="width:100%; height:90px; object-fit:contain;" />
            <div style="padding:6px 0; font-weight:700;">Gatito</div>
          </div>
          <div class="char-card" data-src="assets/Gatito%202.png" tabindex="0">
            <img src="assets/Gatito%202.png" alt="Gatito 2" style="width:100%; height:90px; object-fit:contain;" />
            <div style="padding:6px 0; font-weight:700;">Gatito 2</div>
          </div>
          <div class="char-card" data-src="assets/Gatito%203.png" tabindex="0">
            <img src="assets/Gatito%203.png" alt="Gatito 3" style="width:100%; height:90px; object-fit:contain;" />
            <div style="padding:6px 0; font-weight:700;">Gatito 3</div>
          </div>
          <div class="char-card" data-src="assets/Gatito%20Banana.png" tabindex="0">
            <img src="assets/Gatito%20Banana.png" alt="Gato Banana" style="width:100%; height:90px; object-fit:contain;" />
            <div style="padding:6px 0; font-weight:700;">Gatito Banana</div>
          </div>
        </div>
        <div style="margin-top:14px; display:flex; gap:10px; justify-content:center;">
          <button id="closeCharBtn" style="padding:6px 10px;">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Overlay de Configuraciones (contraste, etc.) -->
    <div id="settingsOverlay" class="menu-overlay hidden">
      <div id="settingsPanel" style="text-align:center; padding:20px; background:white; border-radius:12px; min-width:320px;">
        <h2 style="margin:0 0 10px 0;">Configuraciones</h2>
        <div style="margin-top:12px; display:flex; gap:8px; align-items:center; justify-content:center;">
          <label style="font-weight:700;">Contraste:</label>
          <input id="contrastRangeSettings" class="contrast-range" type="range" min="0" max="100" step="1" value="100" />
          <span id="contrastValue" style="font-weight:700;">100%</span>
        </div>
        <div style="margin-top:12px; display:flex; gap:8px; align-items:center; justify-content:center;">
          <label style="font-weight:700;">Silenciar música:</label>
          <input id="muteCheckbox" type="checkbox" />
        </div>
        <!-- character select moved to its own overlay -->
        <div style="margin-top:16px; display:flex; gap:10px; justify-content:center;">
          <button id="resetContrastBtnSettings" style="padding:6px 10px;">Reset</button>
          <button id="closeSettingsBtn" style="padding:6px 10px;">Cerrar</button>
        </div>
      </div>
    </div>

    <!-- Overlay de nivel completado -->
    <div id="levelCompleteOverlay" class="menu-overlay hidden">
      <div id="levelCompletePanel" style="text-align:center; padding: 24px; background: white; border-radius:16px;">
        <h2 id="levelCompleteTitle">Nivel completado</h2>
        <p id="levelCompleteTime" style="margin:8px 0 18px 0; font-size:18px;">Tiempo: 00:00</p>
        <div style="display:flex; gap:12px; justify-content:center;">
          <button id="repeatLevelBtn">Repetir partida</button>
          <button id="nextLevelBtn">Siguiente nivel</button>
          <button id="returnMenuFromCompleteBtn">Volver menú principal</button>
        </div>
      </div>
    </div>

    <!-- Overlay de Game Over -->
    <div id="gameOverOverlay" class="menu-overlay hidden">
      <div id="gameOverPanel" style="text-align:center; padding: 24px; background: white; border-radius:16px;">
        <h2 id="gameOverTitle">Game Over</h2>
        <p id="gameOverMsg" style="margin:8px 0 18px 0; font-size:18px;">El gatito fue atrapado...</p>
        <div style="display:flex; gap:12px; justify-content:center;">
          <button id="repeatAfterGameOverBtn">Repetir</button>
          <button id="returnMenuFromGameOverBtn">Volver menú</button>
        </div>
      </div>
    </div>

    <script src="js/engine/GameEngine.js"></script>
    <script src="js/utils/InputHandler.js"></script>
    <script src="js/entities/Kitten.js"></script>
    <script src="js/entities/Trash.js"></script>
    <script src="js/ui/HUD.js"></script>
    <script src="js/game/WaveManager.js"></script>
    <script src="js/game/Game.js"></script>
    <script src="js/entities/Shark.js"></script>
    <script src="js/entities/Crab.js"></script>
    <script src="js/entities/Lighthouse.js"></script>
    <script src="js/main.js"></script>
    <script src="js/menu.js"></script>
</body>
</html>